<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Lisa M. Wegner">

<title>Solutions_Visualization Sessions 1 and 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Solutions_Viz_bothsessions_files/libs/clipboard/clipboard.min.js"></script>
<script src="Solutions_Viz_bothsessions_files/libs/quarto-html/quarto.js"></script>
<script src="Solutions_Viz_bothsessions_files/libs/quarto-html/popper.min.js"></script>
<script src="Solutions_Viz_bothsessions_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Solutions_Viz_bothsessions_files/libs/quarto-html/anchor.min.js"></script>
<link href="Solutions_Viz_bothsessions_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Solutions_Viz_bothsessions_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Solutions_Viz_bothsessions_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Solutions_Viz_bothsessions_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Solutions_Viz_bothsessions_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Solutions_Visualization Sessions 1 and 2</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Lisa M. Wegner </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="california-housing" class="level1">
<h1>California Housing</h1>
<p>For all tasks here:</p>
<ul>
<li>Add labels, color and scales in a way that suit the purpose of your graphic</li>
<li>Explain your decision of the type of visualization</li>
<li>Interpret the result</li>
</ul>
</section>
<section id="first-session" class="level1">
<h1><strong><em>first session</em></strong></h1>
<section id="create-a-diagram-that-visualizes-the-distribution-of-the-median-house-value" class="level2">
<h2 class="anchored" data-anchor-id="create-a-diagram-that-visualizes-the-distribution-of-the-median-house-value">1. Create a diagram that visualizes the distribution of the Median House Value</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sozoekds)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>calhouse <span class="ot">&lt;-</span> calhouse <span class="co"># Loading the data set</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> calhouse, <span class="at">mapping =</span> <span class="fu">aes</span> (<span class="at">x=</span> Median_House_Value)) <span class="sc">+</span> <span class="co"># add dataset to plot</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span> <span class="co"># style for plotting</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_binned</span>(<span class="at">n.breaks =</span> <span class="dv">10</span>) <span class="sc">+</span> <span class="co">#defines breaks/category size for x-values</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribution of the Median House Value"</span>, <span class="at">x =</span> <span class="st">"Median House Value"</span>, <span class="at">y=</span> <span class="st">"Number of observations"</span> ) <span class="sc">+</span> <span class="co">#adds titel and axis labels</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_light</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A bar plot fits this purpose because it is a good tool to visualize distributions. I can directly see that the Median House Value that is observed the most is one between 150.000 and 200.000 $.<br>
The distribution of the Median House Value seems to be close to a normal distribution.<br>
I could have also done this visualization with a boxplot (see below) dot-plot or a line-plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(calhouse, <span class="fu">aes</span>(<span class="at">y =</span> Median_House_Value)) <span class="sc">+</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_binned</span>(<span class="at">n.breaks =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Median House Value"</span>, <span class="at">title =</span><span class="st">"Distribution of the Median House Value in $"</span>) <span class="sc">+</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I chose a boxplot that ” visualises five summary statistics (the median, two hinges and two whiskers), and all “outlying” points individually.” (see description)<br>
The box shows the 2nd and 3rd quantile - the “middle 50%” of my observation. They lay between 130.000 and 270.000$. The horizontal line shows the median score - which is around 180.000$.<br>
I can see that there is an out-liner in the lower part of my plot and that the values mostly range from 35.00$ to 470.00$.</p>
</section>
<section id="afterwards-create-a-diagram-that-puts-median-house-value-and-the-distance-to-the-coast-together" class="level2">
<h2 class="anchored" data-anchor-id="afterwards-create-a-diagram-that-puts-median-house-value-and-the-distance-to-the-coast-together">2. Afterwards create a diagram that puts Median House Value and the distance to the coast together</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sozoekds)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>calhouse <span class="ot">&lt;-</span> calhouse <span class="co"># Loading the data set</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span> calhouse, <span class="at">mapping =</span> <span class="fu">aes</span> (<span class="at">x=</span> Median_House_Value, <span class="at">y=</span> Distance_to_coast)) <span class="sc">+</span> <span class="co"># add dataset to plot</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping=</span> <span class="fu">aes</span>(<span class="at">x=</span> Median_House_Value, <span class="at">y=</span> Distance_to_coast), <span class="at">shape =</span> <span class="dv">20</span>) <span class="sc">+</span> <span class="co"># style for plotting </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span> (<span class="at">breaks =</span> <span class="fu">waiver</span>(), <span class="at">n.breaks=</span><span class="dv">25</span>) <span class="sc">+</span>        <span class="co"># the format of the numbers on the scale is changed, I've played around to find the right number for n.breaks</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">waiver</span>(), <span class="at">n.breaks=</span><span class="dv">10</span>) <span class="sc">+</span>  <span class="co"># the format of the numbers on the scale is changed</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Median House Value and Distance to coast"</span>, <span class="at">x =</span> <span class="st">"Median House Value in $"</span>, <span class="at">y=</span> <span class="st">"Distance to coast"</span> ) <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_gray</span>() <span class="co"># adds titel and axis labels</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I chose a scatterplot. I can see the single observations in this kind of plot.<br>
Most houses in the data set are close to the coast - the values are really bunched up there.<br>
While most of the houses that are closer to the coast (smaller than 100.000 units) show a big range of their Median Value the ones that are further apart show to have a value of at most 200.00$.</p>
</section>
</section>
<section id="second-session" class="level1">
<h1><strong><em>second session</em></strong></h1>
<ol type="1">
<li><p>Revisit last weeks plots - how can you re-style them with the principles we learned today?</p></li>
<li><p>New plot(s)</p>
<div class="nonincremental smaller">
<ol type="1">
<li><p>Create a new variable called <code>Avg_Rooms</code> that displays the average amount of rooms in each household in a certain neighborhood (block)</p>
<p><em>Hint: for one observation there might be 20 households, and 50 rooms in total - this leads to an average of 2.5 rooms per household</em></p></li>
<li><p>Plot Avg_Rooms against Median_Income - interpret the result</p></li>
<li><p>Eliminate values in Avg_Rooms that are greater then 10 rooms from your data set - then plot task 2 again</p></li>
<li><p>as before: Explain your decision of the type of visualization + Interpret the results</p></li>
</ol>
</div></li>
</ol>
<section id="create-the-variable-avg_rooms" class="level3">
<h3 class="anchored" data-anchor-id="create-the-variable-avg_rooms"><em>Create the variable Avg_rooms</em></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>calhouse<span class="sc">$</span>Avg_Rooms <span class="ot">&lt;-</span> <span class="fu">round</span>(calhouse<span class="sc">$</span>Tot_Rooms<span class="sc">/</span>calhouse<span class="sc">$</span>Households, <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Avg_Rooms is created by dividing the total rooms per pro through the number of households within this block.</p>
</section>
<section id="plot-avg_rooms-and-income" class="level3">
<h3 class="anchored" data-anchor-id="plot-avg_rooms-and-income"><em>Plot Avg_Rooms and Income</em></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>calhouse, <span class="at">mapping=</span> <span class="fu">aes</span>(<span class="at">x=</span>Median_Income, <span class="at">y=</span> Avg_Rooms)) <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span> <span class="st">"Average Rooms per household"</span>, <span class="at">y=</span><span class="st">"Median Income per Household in Neighbourhood in 10.000 $"</span>, <span class="at">title =</span><span class="st">"Average rooms and median income"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This creates a scatter plot. The income is spread more widely in the households with less than 7.5 rooms. We can see a slight upward shift in the data points - a rise in the number of rooms per household can be associated with a rise in the median income per household. This shift is too small in this graphic to interpret it.</p>
</section>
<section id="subsetting-the-data" class="level3">
<h3 class="anchored" data-anchor-id="subsetting-the-data"><em>Subsetting the data</em></h3>
<p>With cutting the number of rooms by 10 we can get a clearer picture.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>calhouse<span class="sc">$</span>Avg_Rooms <span class="ot">&lt;-</span> <span class="fu">round</span>(calhouse<span class="sc">$</span>Tot_Rooms<span class="sc">/</span>calhouse<span class="sc">$</span>Households, <span class="dv">0</span>) <span class="co">#rounding the average rooms </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>calhouse<span class="sc">$</span>Avg_Rooms_cut <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(calhouse<span class="sc">$</span>Avg_Rooms <span class="sc">&gt;</span> <span class="dv">10</span>, <span class="st">""</span>, <span class="fu">as.character</span>(calhouse<span class="sc">$</span>Avg_Rooms)) <span class="co"># replaces the values bigger than 10</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>calhouse<span class="sc">$</span>Avg_Rooms_cut <span class="ot">&lt;-</span> <span class="fu">factor</span>(calhouse<span class="sc">$</span>Avg_Rooms_cut, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"5"</span>, <span class="st">"6"</span>, <span class="st">"7"</span>, <span class="st">"8"</span>, <span class="st">"9"</span>, <span class="st">"10"</span>)) <span class="co"># creates a factor variable and puts the levels into an order</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>calhouse, <span class="at">mapping=</span> <span class="fu">aes</span>(<span class="at">y=</span>Median_Income, <span class="at">x=</span> Avg_Rooms_cut)) <span class="sc">+</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>()<span class="sc">+</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span> <span class="st">"Average Rooms per household"</span>, <span class="at">y=</span><span class="st">"Median Household Income in Neighbourhood in 10.000 $"</span>, <span class="at">title =</span><span class="st">"Average rooms and median income"</span>) <span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span><span class="fu">waiver</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>A jitterplot helps with the problem of over plotting and allows us to better trace the observations. Each amount of rooms is plotted as a bar that contains the single observations. This way we can see that for houses with less than 7 rooms there seems to be a positive connection from median household income and average rooms per household. With a rise in income the amount of rooms seems to rise. We still have to say that the range of the income within each category of rooms is really big. For houses with more than 8 rooms there are fewer observations that do not crowd in specific areas.</p>
</section>
<section id="adding-colors" class="level3">
<h3 class="anchored" data-anchor-id="adding-colors"><em>Adding colors</em></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>calhouse<span class="sc">$</span>Avg_Rooms <span class="ot">&lt;-</span> <span class="fu">round</span>(calhouse<span class="sc">$</span>Tot_Rooms<span class="sc">/</span>calhouse<span class="sc">$</span>Households, <span class="dv">0</span>) <span class="co">#rounding the average rooms </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>calhouse<span class="sc">$</span>Avg_Rooms_cut <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(calhouse<span class="sc">$</span>Avg_Rooms <span class="sc">&gt;</span> <span class="dv">10</span>, <span class="st">""</span>, <span class="fu">as.character</span>(calhouse<span class="sc">$</span>Avg_Rooms)) <span class="co"># replaces the values bigger than 10</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>calhouse<span class="sc">$</span>Avg_Rooms_cut <span class="ot">&lt;-</span> <span class="fu">factor</span>(calhouse<span class="sc">$</span>Avg_Rooms_cut, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"1"</span>, <span class="st">"2"</span>, <span class="st">"3"</span>, <span class="st">"4"</span>, <span class="st">"5"</span>, <span class="st">"6"</span>, <span class="st">"7"</span>, <span class="st">"8"</span>, <span class="st">"9"</span>, <span class="st">"10"</span>)) <span class="co"># creates a factor variable and puts the levels into an order</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>calhouse, <span class="at">mapping=</span> <span class="fu">aes</span>(<span class="at">y=</span>Median_Income, <span class="at">x=</span> Avg_Rooms_cut)) <span class="sc">+</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">color=</span>Median_Income))<span class="sc">+</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span> <span class="st">"Average Rooms per household"</span>, <span class="at">y=</span><span class="st">"Median Household Income in Neighbourhood in 10.000 $"</span>, <span class="at">title =</span><span class="st">"Average rooms and median income"</span>) <span class="sc">+</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks=</span><span class="fu">waiver</span>()) <span class="sc">+</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_binned</span>(<span class="at">type =</span> <span class="st">"viridis"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The color scale that was used here uses colors that are easy to distinguish - even for people with different forms of colorblindness. Hard boundaries between the different income-levels also lead to a greater readability.</p>
<hr>
</section>
</section>
<section id="sec-exam-scores" class="level1">
<h1>Exam Scores</h1>
</section>
<section id="first-session-1" class="level1">
<h1><strong><em>first session</em></strong></h1>
<section id="create-a-diagram-that-visualizes-the-distribution-of-the-mathscore" class="level2">
<h2 class="anchored" data-anchor-id="create-a-diagram-that-visualizes-the-distribution-of-the-mathscore">1. Create a diagram that visualizes the distribution of the MathScore</h2>
<section id="histogram" class="level4">
<h4 class="anchored" data-anchor-id="histogram"><strong><em>Histogram</em></strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sozoekds)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>exam_score <span class="ot">&lt;-</span> examscores</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(exam_score, <span class="fu">aes</span>(<span class="at">x =</span> MathScore)) <span class="sc">+</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_binned</span>(<span class="at">n.breaks =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Score"</span>, <span class="at">y =</span> <span class="st">"Number of students"</span>) <span class="sc">+</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribution of Math Scores"</span>) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I have chosen a bar-chart to visualize the distribution of the Math Score. This kind of plot shows the number of cases for each Score with its height.<br>
I can see that the values are almost normal distributed while the most students have a score between 60 and 65 points.<br>
&nbsp;+ Additionally I could add colors, add the median, the average score and the range most observations fall into (95%).</p>
</section>
<section id="boxplot" class="level4">
<h4 class="anchored" data-anchor-id="boxplot"><strong><em>Boxplot</em></strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(exam_score, <span class="fu">aes</span>(<span class="at">y =</span> MathScore)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Math Score"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I chose a boxplot that ” visualises five summary statistics (the median, two hinges and two whiskers), and all “outlying” points individually.” (see description)<br>
The box shows the 2nd and 3rd quantile - the “middle 50%” of my observation. The horizontal line shows the median score - which is around 64.<br>
I can see that there are a few out-liners in the lower part of my plot and that the scores mostly range from 25 to 100.</p>
</section>
</section>
<section id="plot-the-distribution-of-the-different-test-scores-in-regards-to-gender" class="level2">
<h2 class="anchored" data-anchor-id="plot-the-distribution-of-the-different-test-scores-in-regards-to-gender">2. Plot the distribution of the different test scores in regards to Gender</h2>
<section id="boxplot-1" class="level4">
<h4 class="anchored" data-anchor-id="boxplot-1"><strong><em>Boxplot</em></strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sozoekds)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>exam_score <span class="ot">&lt;-</span> examscores</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># we can do this plot for all the different scores by changing the y-variable</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(exam_score, <span class="fu">aes</span>(<span class="at">x=</span>Gender, <span class="at">y=</span>MathScore)) <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Score"</span>) <span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribution of Math Scores"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I chose a boxplot that ” visualises five summary statistics (the median, two hinges and two whiskers), and all “outlying” points individually.” (see description)<br>
The box shows the 2nd and 3rd quantile - the “middle 50%” of my observation., this box is covering higher scores for the males than for the females. The horizontal line shows the median score - which is around 63 for the females and a bit higher (around 65) for the males. I can see that there are a few out-liners in the lower part of my plot and that the student with zero points was female. I can see that the scores range from 24 to 100 for the females and from 28 to 100 for the males.</p>
</section>
<section id="lineplot" class="level4">
<h4 class="anchored" data-anchor-id="lineplot"><strong><em>Lineplot</em></strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sozoekds)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>exam_score <span class="ot">&lt;-</span> examscores</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>exam_score<span class="sc">$</span>Gender_Factor <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(exam_score<span class="sc">$</span>Gender)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a plot</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(exam_score, <span class="fu">aes</span>(<span class="at">x =</span> MathScore, <span class="at">y =</span> <span class="fu">after_stat</span>(count), <span class="at">color =</span> Gender_Factor)) <span class="sc">+</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">stat =</span> <span class="st">"count"</span>, <span class="at">linewidth=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Math Score"</span>, <span class="at">y =</span> <span class="st">"Count"</span>, <span class="at">color =</span> <span class="st">"Gender"</span>, <span class="at">title=</span> <span class="st">"Math Scores for male and female students"</span>) <span class="sc">+</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>     <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I could also visualize the distribution with a lineplot. Here we can see that the distributions look quite familiar for males and females, but the female distribution seems to be slightly shifted to the left - which leads to lower math scores. Bot graphs have a similar peak-point at around 63.</p>
<p>I can get info on color scales at <a href="https://www.datanovia.com/en/blog/top-r-color-palettes-to-know-for-great-data-visualization/" class="uri">https://www.datanovia.com/en/blog/top-r-color-palettes-to-know-for-great-data-visualization/</a></p>
</section>
</section>
</section>
<section id="second-session-1" class="level1">
<h1><strong><em>second session</em></strong></h1>
<ol type="1">
<li><p>Revisit last weeks plots - how can you re-style them with the principles we learned today?</p></li>
<li><p>New plot(s)</p></li>
</ol>
<div class="nonincremental">
<ol type="a">
<li><p>Create a new variable called <code>full_score</code> that is the mean score of all three testscores (Math, Reading, Writing)</p></li>
<li><p>Calculate grades from the <code>full_score</code> using the american system (<a href="https://en.wikipedia.org/wiki/Academic_grading_in_the_United_States">hint here</a>)</p></li>
<li><p>Plot the distribution of grades by number of study hours per week<br>
Hint: create a factor variable from WklyStudyHours</p>
<p>Hint: You could do this in one plot with multiple lines or in more than one graphic where all the plots are printed in one frame (<a href="https://intro2r.com/mult_graphs.html" class="uri">https://intro2r.com/mult_graphs.html</a>)</p></li>
<li><p>as before: Explain your decision of the type of visualization + Interpret the results</p></li>
</ol>
</div>
<section id="sec-calculating-the-full-score" class="level3">
<h3 class="anchored" data-anchor-id="sec-calculating-the-full-score"><em>calculating the full score</em></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sozoekds)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>exam_score <span class="ot">&lt;-</span> examscores</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># calculate the average score</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>exam_score<span class="sc">$</span>full_score <span class="ot">&lt;-</span>(</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  exam_score<span class="sc">$</span>ReadingScore <span class="sc">+</span> exam_score<span class="sc">$</span>WritingScore <span class="sc">+</span> exam_score<span class="sc">$</span>ReadingScore)<span class="sc">/</span><span class="dv">3</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a> exam_score<span class="sc">$</span>full_score <span class="ot">&lt;-</span> <span class="fu">round</span>(exam_score<span class="sc">$</span>full_score, <span class="at">digits=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="transforming-the-full-score-to-a-grade" class="level3">
<h3 class="anchored" data-anchor-id="transforming-the-full-score-to-a-grade"><em>transforming the full score to a grade</em></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>exam_score<span class="sc">$</span>grade <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(exam_score<span class="sc">$</span>full_score <span class="sc">&gt;=</span> <span class="dv">90</span>, <span class="st">"A"</span>,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">ifelse</span>(exam_score<span class="sc">$</span>full_score <span class="sc">&gt;=</span> <span class="dv">80</span> <span class="sc">&amp;</span>  </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                             exam_score<span class="sc">$</span>full_score <span class="sc">&lt;=</span> <span class="dv">89</span>, <span class="st">"B"</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">ifelse</span>(exam_score<span class="sc">$</span>full_score <span class="sc">&gt;=</span> <span class="dv">70</span> <span class="sc">&amp;</span>  exam_score<span class="sc">$</span>full_score <span class="sc">&lt;=</span> <span class="dv">79</span>, <span class="st">"C"</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">ifelse</span>(exam_score<span class="sc">$</span>full_score <span class="sc">&gt;=</span> <span class="dv">60</span> <span class="sc">&amp;</span>  exam_score<span class="sc">$</span>full_score <span class="sc">&lt;=</span> <span class="dv">69</span>, <span class="st">"D"</span>, <span class="st">"E"</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                                  )))) <span class="co">#the score can be seen as percent and be converted to grades using ifelse conditions</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># please note: close all brackets that you have opened!</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>exam_score<span class="sc">$</span>grade <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(exam_score<span class="sc">$</span>grade)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code calculates an average score of all three scores and then assigns a grade to each value. The grades are assigned using ifelse-conditions.</p>
</section>
<section id="creating-an-ordered-categorical-variable-out-of-the-wklystudyhours" class="level3">
<h3 class="anchored" data-anchor-id="creating-an-ordered-categorical-variable-out-of-the-wklystudyhours"><em>creating an ordered categorical variable out of the WklyStudyHours</em></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Order the factor levels &amp; rename factor</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># study hours can be set up as a categorial variable</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>exam_score<span class="sc">$</span>factor_weekly_study_hours <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(exam_score<span class="sc">$</span>WklyStudyHours)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># we have to give the levels an order since they are discrete variables</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>new_order <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"&lt; 5"</span>, <span class="st">"5 - 10"</span>, <span class="st">"&gt; 10"</span>)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>exam_score<span class="sc">$</span>factor_weekly_study_hours <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  exam_score<span class="sc">$</span>factor_weekly_study_hours,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> new_order</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(exam_score<span class="sc">$</span>factor_weekly_study_hours)[<span class="fu">levels</span>(exam_score<span class="sc">$</span>factor_weekly_study_hours) <span class="sc">==</span> <span class="st">""</span>] <span class="ot">&lt;-</span> <span class="st">"NA"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code changes the WklyStudyHours into a factor variable and assigns an order to the levels since they are ordered.</p>
</section>
<section id="plot-of-study-hours-and-grade-distribution" class="level3">
<h3 class="anchored" data-anchor-id="plot-of-study-hours-and-grade-distribution"><em>Plot of Study Hours and grade distribution</em></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plotting:</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(exam_score, <span class="fu">aes</span>(<span class="at">x=</span>factor_weekly_study_hours, <span class="at">fill=</span>grade)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">n.breaks =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Grade distribution for weekly study hours"</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x=</span><span class="st">"weekly study hours"</span>, <span class="at">y=</span><span class="st">"grade distribution for factor level"</span>, <span class="at">fill=</span><span class="st">"grades"</span>) <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Solutions_Viz_bothsessions_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The code creates a plot that shows the distribution of grades within each group while making the bars the same height - this way we can see the relative distribution and relative proportion per group and not just the absolute numbers.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>